---
- name: EPEL repository is enabled
  yum_repository:
        name: epel
        description: Extra Packages for Enterprise Linux
        baseurl: http://download.fedoraproject.org/pub/epel/$releasever/$basearch/

- name: RPM Fusion free repository is enabled
  yum:
        name: https://download1.rpmfusion.org/free/el/updates/6/i386/rpmfusion-free-release-6-1.noarch.rpm
        disable_gpg_check: yes
        state: present

- name: RPM Fusion non-free repository is enabled
  yum:
        name: https://download1.rpmfusion.org/nonfree/el/updates/6/i386/rpmfusion-nonfree-release-6-1.noarch.rpm
        disable_gpg_check: yes
        state: present

- name: installed packages are up-to-date
  yum:
        name: '*'
        state: latest

- name: ansible utility packages are installed
  yum:
        name: '{{ item }}'
        state: latest
  with_items:
        # - libselinux-python
        - firewalld
        - python-pip

- name: zsh is installed
  yum:
        name: zsh
        state: latest

- name: zsh is configured
  copy:
        src: zshrc
        dest: /home/tvuillemin/.zshrc
        owner: tvuillemin

- name: zsh is the default shell
  user:
        name: tvuillemin
        state: present
        shell: /usr/bin/zsh

- name: vim is installed
  yum:
        name: vim
        state: latest

- name: vim is configured
  copy:
        src: vimrc
        dest: /home/tvuillemin/.vimrc
        owner: tvuillemin

- name: htop is installed
  yum:
        name: htop
        state: latest

- name: firewall is started
  systemd:
        name: firewalld
        state: started
        enabled: yes

- name: firewall default zone is attached to the main network interface
  command: firewall-cmd --zone=public --change-interface=eth0
...
